{% extends "base.twig" %}

{% block title %}Edit Site{% endblock %}

{% block content %}
<section class="card">
    <div class="card-header">
        <h2>Edit Site</h2>
        <a class="btn btn-tertiary" href="/admin/sites">Back to sites</a>
    </div>

    <form method="post" action="/admin/sites/{{ site.id }}" class="form">
        <div class="form-group">
            <label for="name">Site Name <span class="required">*</span></label>
            <input type="text" id="name" name="name" value="{{ site.name }}" required minlength="2" maxlength="255">
        </div>

        <div class="form-group">
            <label for="company_id">Company <span class="required">*</span></label>
            <select id="company_id" name="company_id" required>
                <option value="">Select a company...</option>
                {% for company in companies %}
                    <option value="{{ company.id }}"{% if company.id == site.company_id %} selected{% endif %}>{{ company.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="region_id">Region</label>
            <select id="region_id" name="region_id">
                <option value="">Select a region...</option>
                {% for region in regions %}
                    <option value="{{ region.id }}"{% if region.id == site.region_id %} selected{% endif %}>{{ region.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="site_type">Site Type <span class="required">*</span></label>
            <select id="site_type" name="site_type" required>
                {% for value, label in site_types %}
                    <option value="{{ value }}"{% if value == site.site_type %} selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="address">Address <span class="required">*</span></label>
            <textarea id="address" name="address" required rows="3" minlength="5">{{ site.address }}</textarea>
        </div>

        <div class="form-group">
            <label for="postcode">Postcode</label>
            <input type="text" id="postcode" name="postcode" value="{{ site.postcode }}" maxlength="10">
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="latitude">Latitude</label>
                <input type="number" id="latitude" name="latitude" value="{{ site.latitude }}" step="0.00000001" min="-90" max="90">
            </div>

            <div class="form-group">
                <label for="longitude">Longitude</label>
                <input type="number" id="longitude" name="longitude" value="{{ site.longitude }}" step="0.00000001" min="-180" max="180">
            </div>
        </div>

        <div class="form-group">
            <label for="floor_area">Floor Area (mÂ²)</label>
            <input type="number" id="floor_area" name="floor_area" value="{{ site.floor_area }}" step="0.01" min="0">
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="is_active" value="1"{% if site.is_active %} checked{% endif %}>
                Active
            </label>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Update Site</button>
            <a href="/admin/sites" class="btn btn-tertiary">Cancel</a>
        </div>
    </form>
</section>
{% endblock %}
